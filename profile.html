<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#121212">
    <link rel="icon" type="image/png" sizes="64x64" href="assets/logo-small-64.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/logo-small-256.png">
    <link rel="manifest" href="manifest.json">
    <title>GymLog - Profil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neon-green': '#10b981',
                        'dark-bg': '#121212',
                        'dark-card': '#1e1e1e',
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in { animation: slideIn 0.3s ease-out; }
    </style>
</head>
<body class="bg-dark-bg text-gray-100 min-h-screen pb-20">
    <div class="max-w-lg mx-auto p-4 sm:p-6">
        <!-- Header -->
        <header class="flex items-center justify-between mb-8 pt-4">
            <div class="flex items-center gap-3">
                <img src="assets/logo.png" alt="GymLog" class="h-10 w-auto">
            </div>
        </header>

        <!-- Main Content -->
        <main class="space-y-6">
            <!-- Profile Card -->
            <div class="bg-dark-card rounded-xl p-6 border border-gray-800">
                <div class="flex items-center gap-4 mb-6">
                    <div class="relative w-20 h-20 rounded-full group cursor-pointer" onclick="showPhotoOptions()">
                        <img id="profilePicDisplay" src="" alt="Profile" class="hidden w-full h-full rounded-full object-cover border-2 border-neon-green">
                        <div id="profilePicPlaceholder" class="w-20 h-20 rounded-full bg-gradient-to-br from-neon-green to-green-600 flex items-center justify-center p-4">
                            <img src="assets/user-solid-full.svg" alt="User" class="w-full h-full" style="filter: brightness(0) saturate(100%) invert(10%) sepia(8%) saturate(7%) hue-rotate(359deg) brightness(94%) contrast(91%);">
                        </div>
                        <div class="absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <input type="file" id="cameraInput" accept="image/*" capture="user" class="hidden">
                        <input type="file" id="galleryInput" accept="image/*" class="hidden">
                    </div>
                    <div class="flex-1">
                        <p class="text-sm text-gray-500">UÅ¼ytkownik</p>
                        <p id="displayUsername" class="text-xl font-bold text-gray-200">GymLog User</p>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-3 gap-3">
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Wiek</p>
                        <p id="displayAge" class="text-lg font-bold text-neon-green">-</p>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Wzrost</p>
                        <p id="displayHeight" class="text-lg font-bold text-neon-green">-</p>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Waga</p>
                        <p id="displayWeight" class="text-lg font-bold text-neon-green">-</p>
                    </div>
                </div>
            </div>

            <!-- BMI Card -->
            <div id="bmiCard" class="hidden bg-dark-card rounded-xl p-6 border border-gray-800 animate-slide-in">
                <div class="flex items-center gap-2 mb-4">
                    <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    <h2 class="text-xl font-black text-gray-300">BMI</h2>
                </div>
                <div class="flex items-center justify-between mb-3">
                    <span class="text-3xl font-black" id="bmiValue">-</span>
                    <span class="px-3 py-1 rounded-full text-sm font-bold" id="bmiCategory">-</span>
                </div>
                <div class="h-2 bg-gray-900 rounded-full overflow-hidden">
                    <div id="bmiBar" class="h-full transition-all duration-500" style="width: 0%"></div>
                </div>
                <div class="mt-3 flex justify-between text-xs text-gray-500">
                    <span>Niedowaga</span>
                    <span>Norma</span>
                    <span>Nadwaga</span>
                </div>
            </div>

            <!-- Edit Profile Form -->
            <div class="bg-dark-card rounded-xl p-6 border border-gray-800">
                <h3 class="text-lg font-bold text-gray-300 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-neon-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                    Edytuj dane
                </h3>
                <form id="profileForm" class="space-y-4">
                    <div>
                        <label for="username" class="block text-sm font-semibold text-gray-400 mb-2">Nazwa uÅ¼ytkownika</label>
                        <input type="text" id="username" maxlength="30" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all" placeholder="np. Jan Kowalski">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-400 mb-2">PÅ‚eÄ‡</label>
                        <div class="flex gap-3">
                            <label class="flex-1 flex items-center justify-center gap-2 bg-gray-900 border-2 border-gray-700 rounded-lg p-3 cursor-pointer hover:border-neon-green transition-colors group">
                                <input type="radio" name="gender" value="male" class="hidden peer">
                                <svg class="w-5 h-5 fill-gray-500 peer-checked:fill-neon-green transition-colors" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                                    <path d="M384 96C384 78.3 398.3 64 416 64L544 64C561.7 64 576 78.3 576 96L576 224C576 241.7 561.7 256 544 256C526.3 256 512 241.7 512 224L512 173.3L417 268.3C436.5 296.7 448 331 448 368.1C448 465.3 369.2 544.1 272 544.1C174.8 544.1 96 465.2 96 368C96 270.8 174.8 192 272 192C309 192 343.4 203.4 371.8 223L466.8 128L416.1 128C398.4 128 384.1 113.7 384.1 96zM272 480C333.9 480 384 429.9 384 368C384 306.1 333.9 256 272 256C210.1 256 160 306.1 160 368C160 429.9 210.1 480 272 480z"/>
                                </svg>
                                <span class="text-sm font-bold text-gray-500 peer-checked:text-neon-green">MÄ™Å¼czyzna</span>
                            </label>
                            <label class="flex-1 flex items-center justify-center gap-2 bg-gray-900 border-2 border-gray-700 rounded-lg p-3 cursor-pointer hover:border-neon-green transition-colors group">
                                <input type="radio" name="gender" value="female" class="hidden peer">
                                <svg class="w-5 h-5 fill-gray-500 peer-checked:fill-neon-green transition-colors" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                                    <path d="M208 240C208 178.1 258.1 128 320 128C381.9 128 432 178.1 432 240C432 301.9 381.9 352 320 352C258.1 352 208 301.9 208 240zM351.9 413.1C433.9 398.1 496 326.3 496 240C496 142.8 417.2 64 320 64C222.8 64 144 142.8 144 240C144 326.3 206.1 398.1 288.1 413.1C288 414.1 288 415 288 416L288 480L256 480C238.3 480 224 494.3 224 512C224 529.7 238.3 544 256 544L288 544L288 576C288 593.7 302.3 608 320 608C337.7 608 352 593.7 352 576L352 544L384 544C401.7 544 416 529.7 416 512C416 494.3 401.7 480 384 480L352 480L352 416C352 415 352 414.1 351.9 413.1z"/>
                                </svg>
                                <span class="text-sm font-bold text-gray-500 peer-checked:text-neon-green">Kobieta</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label for="age" class="block text-sm font-semibold text-gray-400 mb-2">Wiek (lata)</label>
                        <input type="number" id="age" min="10" max="120" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all" placeholder="np. 25">
                    </div>
                    <div>
                        <label for="height" class="block text-sm font-semibold text-gray-400 mb-2">Wzrost (cm)</label>
                        <input type="number" id="height" min="100" max="250" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all" placeholder="np. 180">
                    </div>
                    <div>
                        <label for="oneRmFormula" class="block text-sm font-semibold text-gray-400 mb-2">FormuÅ‚a 1RM</label>
                        <select id="oneRmFormula" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all">
                            <option value="epley">Epley (domyÅ›lna)</option>
                            <option value="brzycki">Brzycki</option>
                            <option value="lombardi">Lombardi</option>
                            <option value="landers">Landers</option>
                            <option value="oconner">O'Conner</option>
                            <option value="average">Åšrednia (wszystkie formuÅ‚y)</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">UÅ¼ywana do estymacji maksymalnego ciÄ™Å¼aru na wykresach</p>
                    </div>
                    <button type="submit" class="w-full bg-neon-green hover:bg-green-600 text-gray-900 font-black py-3 rounded-lg transition-colors">
                        Zapisz dane
                    </button>
                </form>
            </div>

            <!-- Add Weight Entry -->
            <div class="bg-dark-card rounded-xl p-6 border border-gray-800">
                <h3 class="text-lg font-bold text-gray-300 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                    Dodaj pomiar wagi
                </h3>
                <form id="weightForm" class="space-y-4">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label for="weightDate" class="block text-sm font-semibold text-gray-400 mb-2">Data</label>
                            <input type="date" id="weightDate" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label for="weight" class="block text-sm font-semibold text-gray-400 mb-2">Waga (kg)</label>
                            <input type="number" id="weight" step="0.1" min="30" max="300" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:ring-2 focus:ring-neon-green focus:border-transparent transition-all" placeholder="np. 80">
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-black py-3 rounded-lg transition-colors">
                        Dodaj wpis
                    </button>
                </form>
            </div>

            <!-- Weight Chart -->
            <div id="weightChartContainer" class="hidden bg-dark-card rounded-xl p-6 border border-gray-800 animate-slide-in">
                <h3 class="text-lg font-bold text-gray-300 mb-4 flex items-center gap-2">
                    <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/>
                    </svg>
                    Historia wagi
                </h3>
                <div class="bg-gray-900 rounded-lg p-3 mb-4">
                    <canvas id="weightChart"></canvas>
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Zmiana</p>
                        <p id="weightChange" class="text-lg font-bold">-</p>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Åšrednia</p>
                        <p id="weightAverage" class="text-lg font-bold text-gray-300">-</p>
                    </div>
                    <div class="bg-gray-900 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-500 mb-1">Pomiary</p>
                        <p id="weightCount" class="text-lg font-bold text-gray-300">-</p>
                    </div>
                </div>
            </div>

            <!-- Weight History List -->
            <div id="weightHistoryContainer" class="hidden bg-dark-card rounded-xl p-6 border border-gray-800 animate-slide-in">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-bold text-gray-300">Ostatnie pomiary</h3>
                    <button id="clearWeightHistoryBtn" class="text-sm text-red-400 hover:text-red-300 font-semibold">WyczyÅ›Ä‡</button>
                </div>
                <div id="weightHistory" class="space-y-2 max-h-64 overflow-y-auto">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- App Info -->
            <div class="bg-dark-card rounded-xl p-6 border border-gray-800">
                <div class="flex items-center gap-2 mb-3">
                    <svg class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wide">Informacje o aplikacji</h3>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Wersja</span>
                        <span class="text-sm font-bold text-gray-300" id="appVersion">-</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">Ostatnia aktualizacja</span>
                        <span class="text-sm font-bold text-gray-300">3 lutego 2026</span>
                    </div>
                    <div class="pt-2 border-t border-gray-800 text-center">
                        <p class="text-xs text-gray-600">Made with ðŸ’ª for GymLog</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Photo Options Dialog -->
    <div id="photoDialog" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4" onclick="closePhotoDialog()">
        <div class="bg-dark-card rounded-xl p-6 max-w-xs w-full border border-gray-800" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold text-gray-200 mb-4 text-center">Dodaj zdjÄ™cie profilowe</h3>
            <div class="space-y-3">
                <button onclick="selectCamera()" class="w-full bg-gray-900 hover:bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-center gap-3 transition-colors">
                    <svg class="w-6 h-6 text-neon-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <span class="text-gray-200 font-semibold">ZrÃ³b zdjÄ™cie</span>
                </button>
                <button onclick="selectGallery()" class="w-full bg-gray-900 hover:bg-gray-800 border border-gray-700 rounded-lg p-4 flex items-center gap-3 transition-colors">
                    <svg class="w-6 h-6 text-neon-green" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    <span class="text-gray-200 font-semibold">Wybierz z galerii</span>
                </button>
                <button onclick="closePhotoDialog()" class="w-full bg-gray-800 hover:bg-gray-700 rounded-lg p-3 text-gray-400 font-semibold transition-colors">
                    Anuluj
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-dark-card border-t border-gray-800 z-50">
        <div class="max-w-lg mx-auto flex">
            <a href="index.html" class="flex-1 flex flex-col items-center justify-center py-4 text-gray-500 hover:text-gray-400 transition-colors">
                <img src="assets/dumbbell-solid-full.svg" alt="Trening" class="w-7 h-7 mb-1" style="filter: brightness(0) saturate(100%) invert(35%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(95%) contrast(90%);">
                <span class="text-xs font-bold">TRENING</span>
            </a>
            <a href="stats.html" class="flex-1 flex flex-col items-center justify-center py-4 text-gray-500 hover:text-gray-400 transition-colors">
                <img src="assets/chart-simple-solid-full.svg" alt="Statystyki" class="w-7 h-7 mb-1" style="filter: brightness(0) saturate(100%) invert(35%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(95%) contrast(90%);">
                <span class="text-xs font-bold">STATYSTYKI</span>
            </a>
            <a href="profile.html" class="flex-1 flex flex-col items-center justify-center py-4 text-neon-green">
                <svg class="w-7 h-7 mb-1" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <span class="text-xs font-bold">PROFIL</span>
            </a>
        </div>
    </nav>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script src="install.js"></script>
    <script src="js/sw-manager.js"></script>
    <script src="js/profile-page.js"></script>
</body>
</html>
